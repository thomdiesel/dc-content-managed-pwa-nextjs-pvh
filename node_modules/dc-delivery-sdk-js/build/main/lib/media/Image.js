"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Media_1 = require("./Media");
var MediaMeta_1 = require("./MediaMeta");
var FragmentMeta_1 = require("../content/model/FragmentMeta");
var ImageUrlBuilder_1 = require("./ImageUrlBuilder");
/**
 * Class representing an Image resource with helper functions.
 * Image URL helper functions will take into consideration staging and custom hostname overrides.
 */
var Image = /** @class */ (function (_super) {
    __extends(Image, _super);
    /**
     * Creates a new Image instance.
     * @param data JSON data from delivery API
     * @param config Client configuration
     */
    function Image(data, config) {
        var _this = _super.call(this, data, config) || this;
        if (data && data._meta) {
            _this._meta = new MediaMeta_1.ImageMeta(data._meta);
        }
        return _this;
    }
    /**
     * Returns a builder which can be used to construct a URL to this image resource.
     * You can apply transformations such as resize and image format using the returned builder.
     *
     * ```typescript
     * image.thumbnail().width(500).build();
     * ```
     */
    Image.prototype.url = function () {
        return new ImageUrlBuilder_1.ImageUrlBuilder(this);
    };
    /**
     * Export Image to JSON
     */
    Image.prototype.toJSON = function () {
        var result = _super.prototype.toJSON.call(this);
        if (this._meta) {
            result._meta = this._meta.toJSON();
        }
        return result;
    };
    /**
     * @hidden
     * Returns true if the provided fragment is an image
     * @param fragment
     */
    Image.isImage = function (fragment) {
        return (FragmentMeta_1.FragmentMeta.isFragment(fragment) &&
            fragment._meta.schema ===
                'http://bigcontent.io/cms/schema/v1/core#/definitions/image-link');
    };
    return Image;
}(Media_1.Media));
exports.Image = Image;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSW1hZ2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvbGliL21lZGlhL0ltYWdlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFBLGlDQUFnQztBQUNoQyx5Q0FBd0M7QUFDeEMsOERBQTZEO0FBQzdELHFEQUFvRDtBQUdwRDs7O0dBR0c7QUFDSDtJQUEyQix5QkFBSztJQUM5Qjs7OztPQUlHO0lBQ0gsZUFBWSxJQUFTLEVBQUUsTUFBMkI7UUFBbEQsWUFDRSxrQkFBTSxJQUFJLEVBQUUsTUFBTSxDQUFDLFNBSXBCO1FBSEMsSUFBSSxJQUFJLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRTtZQUN0QixLQUFJLENBQUMsS0FBSyxHQUFHLElBQUkscUJBQVMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDeEM7O0lBQ0gsQ0FBQztJQUVEOzs7Ozs7O09BT0c7SUFDSCxtQkFBRyxHQUFIO1FBQ0UsT0FBTyxJQUFJLGlDQUFlLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDbkMsQ0FBQztJQUVEOztPQUVHO0lBQ0gsc0JBQU0sR0FBTjtRQUNFLElBQU0sTUFBTSxHQUFHLGlCQUFNLE1BQU0sV0FBRSxDQUFDO1FBQzlCLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRTtZQUNkLE1BQU0sQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQztTQUNwQztRQUNELE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7SUFFRDs7OztPQUlHO0lBQ1csYUFBTyxHQUFyQixVQUFzQixRQUFhO1FBQ2pDLE9BQU8sQ0FDTCwyQkFBWSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUM7WUFDakMsUUFBUSxDQUFDLEtBQUssQ0FBQyxNQUFNO2dCQUNuQixpRUFBaUUsQ0FDcEUsQ0FBQztJQUNKLENBQUM7SUFDSCxZQUFDO0FBQUQsQ0FBQyxBQWhERCxDQUEyQixhQUFLLEdBZ0QvQjtBQWhEWSxzQkFBSyJ9